#include<iostream>
#include<conio.h>
#include<cstdlib>
#include<string.h>
#include<cmath>
using namespace std;

int main()
{
string nr = "08022297381500400075040507785212507791084949994017811857608717409843694804566200814931735579142993714067538830034913366552709523046011426924685601325671370236912231167151676389419236542240402866331380244732609903450244753353783684203517125032988128642367102638406759547066183864706726206802621220956394396308409166499421245558056673992697177878968314883489637221362309750076442045351400613397343133957817532822753167159403800462161409535692163905429635314755588824001754243629855786560048357189070544443744602158515417581980816805944769287392138652177704895540045208839735991607975732162626793327986688366887576220720346336746551232639353690442167338253911249472180846293240627636206936417230238834629969826759857404361620733529783190017431497148868116235705540170547183515469169233486143520189196748";
int M[20][20], nrsave=0, saved[2], sf=-1;

for(int i=0; i<20; i++)
{
	for(int j=0; j<20; j++)
	{
	M[i][j]=((int)nr[nrsave+1]-48)+(((int)nr[nrsave]-48)*10);
	nrsave+=2;
	if(M[i][j]>9) {cout<<M[i][j]<<" ";}
	else  {cout<<'0'<<M[i][j]<<" ";}
	}
	cout<<endl;
}
cout<<"\n"<<endl;

int sh=-1;
for(int i=0; i<20; i++)
{
	for(int j=0; j<17; j++)
	{
	if((M[i][j]*M[i][j+1]*M[i][j+2]*M[i][j+3])>sh) { sh=(M[i][j]*M[i][j+1]*M[i][j+2]*M[i][j+3]); saved[0]=i+1; saved[1]=j+1; }
	}
}
cout<<"  horizontal:    "<<sh<<"       i="<<saved[0]<<"   j="<<saved[1]<<endl;
if(sh>sf) {sf=sh;}

int sv=-1;
for(int i=0; i<17; i++)
{
	for(int j=0; j<20; j++)
	{
	if((M[i][j]*M[i+1][j]*M[i+2][j]*M[i+3][j])>sv) { sv=(M[i][j]*M[i+1][j]*M[i+2][j]*M[i+3][j]); saved[0]=i+1; saved[1]=j+1; }
	}
}
cout<<"  vertical:      "<<sv<<"       i="<<saved[0]<<"   j="<<saved[1]<<endl;
if(sv>sf) {sf=sv;}


int sd1=-1;
for(int i=0; i<17; i++)
{
	for(int j=0; j<17; j++)
	{
	if((M[i][j]*M[i+1][j+1]*M[i+2][j+2]*M[i+3][j+3])>sd1) { sd1=(M[i][j]*M[i+1][j+1]*M[i+2][j+2]*M[i+3][j+3]); saved[0]=i+1; saved[1]=j+1; }
	}
}
cout<<"  diagonal(1):   "<<sd1<<"       i="<<saved[0]<<"   j="<<saved[1]<<endl;
if(sd1>sf) {sf=sd1;}



int sd2=-1;
for(int i=0; i<17; i++)
{
	for(int j=0; j<17; j++)
	{
	if((M[i][20-j]*M[(i)+1][(20-j)-1]*M[(i)+2][(20-j)-2]*M[(i)+3][(20-j)-3])>sd2) 
	{ sd2=(M[i][20-j]*M[(i)+1][(20-j)-1]*M[(i)+2][(20-j)-2]*M[(i)+3][(20-j)-3]); saved[0]=i+1; saved[1]=20-j+1; }
	}
}
cout<<"  diagonal(2):   "<<sd2<<"       i="<<saved[0]<<"   j="<<saved[1]<<endl;
if(sd2>sf) {sf=sd2;}



cout<<"suma="<<sf<<endl;

return 0;
}
